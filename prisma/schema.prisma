// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model SiteAnalysis {
  id                Int    @id @default(autoincrement()) // Identificador único da análise
  score             Float  // Nota geral
  performance       Float  // Nota de desempenho
  accessibility     Float  // Nota de acessibilidade
  bestPractices     Float  // Nota de boas práticas
  seo               Float  // Nota de SEO
  dataAnalise       DateTime @default(now()) // Data da análise
  rawReport         Json?  // Relatório bruto
  relatorioTraduzido Json? // Relatório traduzido (opcional)

  // Chave estrangeira para relacionamento com a tabela 'sites'
  siteId            Int    // ID do site relacionado
  site              Site   @relation(fields: [siteId], references: [id]) // Relacionamento com 'Site'
}

model Site {
  id       Int      @id @default(autoincrement()) // Identificador único
  nome     String   // Nome do site
  url      String   // URL do site
  orgao    String   // Órgão responsável pelo site
  ativo    Boolean  @default(true) // Indica se o site está ativo ou não

  // Relacionamento com a tabela de análises
  analises SiteAnalysis[] // Um site pode ter várias análises
}